diff -urN units-1.86/Makefile.dos units-1.86-new/Makefile.dos
--- units-1.86/Makefile.dos	2005-04-24 20:14:54.000000000 +0200
+++ units-1.86-new/Makefile.dos	2007-06-05 11:11:18.758989000 +0200
@@ -1,13 +1,14 @@
 # edit these lines to suit
 CC = cl
-CFLAGS = -O2 -G5 -W3 -Za -nologo
+CFLAGS = -O2 -nologo -MD -D_CRT_SECURE_NO_DEPRECATE
 
-OBJS = units.obj getopt.obj getopt1.obj parse.obj
+OBJS = units.obj getopt.obj getopt1.obj parse.obj units.res
 # Uncomment this line and edit to suit
 # UDEFINES = -D'UNITSFILE="c:/usr/local/share/units.dat"'
 
 units.exe: $(OBJS)
 	$(CC) $(CFLAGS) $(OBJS) $(LIBS)
+	mt -manifest $@.manifest -outputresource:$@
 
 getopt.obj: getopt.c
 	$(CC) $(CFLAGS) $(CDEFINES) -c getopt.c
@@ -20,7 +21,10 @@
 
 parse.obj: parse.tab.c
 	$(CC) $(CFLAGS) $(CDEFINES) -c parse.tab.c
-	mv parse.tab.obj parse.obj
+	move parse.tab.obj parse.obj
+
+units.res: units.rc
+	rc /r /fo$@ units.rc
 
 clean:
-	rm -f $(OBJS)
+	del /q $(OBJS) *.manifest *.exe
diff -urN units-1.86/units.rc units-1.86-new/units.rc
--- units-1.86/units.rc	1970-01-01 01:00:00.000000000 +0100
+++ units-1.86-new/units.rc	2007-06-05 11:10:37.021044100 +0200
@@ -0,0 +1,30 @@
+#include <windows.h>
+
+VS_VERSION_INFO VERSIONINFO
+FILEVERSION	1, 86, 0, 0
+PRODUCTVERSION	1, 86, 0, 0
+FILEFLAGSMASK	0x3fL
+FILEFLAGS 0
+FILEOS VOS_NT_WINDOWS32
+FILETYPE VFT_APP
+FILESUBTYPE VFT2_UNKNOWN
+BEGIN
+	BLOCK	"VarFileInfo"
+	BEGIN
+		VALUE	"Translation",	0x409,	1200
+	END
+	BLOCK	"StringFileInfo"
+	BEGIN
+		BLOCK "040904b0"
+		BEGIN
+			VALUE	"CompanyName",	"GNU <www.gnu.org>\0"
+			VALUE	"FileDescription",	"Units conversion utility\0"
+			VALUE	"FileVersion",	"1.86\0"
+			VALUE	"InternalName",	"Units\0"
+			VALUE	"LegalCopyright",	"Copyright 2006 Free Software Foundation\0"
+			VALUE	"OriginalFilename",	"units.exe\0"
+			VALUE	"ProductName",	"Units\0"
+			VALUE	"ProductVersion",	"1.86\0"
+		END
+	END
+END
