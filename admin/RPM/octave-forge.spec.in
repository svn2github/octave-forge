Summary:	Additional functions for octave
Name:		octave-forge
Version:	@OCTAVE_FORGE_RELEASE@
Release:	1
License:	GPL
Group:		Applications/Engineering
URL:		http://octave.sourceforge.net
Source:		%{url}/cgi-bin/viewcvs.cgi/octave/%{name}-%{version}.tar.gz
Requires:	octave
Requires:	libjpeg libpng ImageMagick GiNaC qhull
BuildPrereq:	octave gcc-c++ tetex gcc-g77 ncurses-devel libjpeg-devel
BuildPrereq:	libpng-devel zlib-devel libtermcap-devel libstdc++-devel
BuildPrereq:	GiNaC-devel qhull-devel
BuildRoot:	%{_tmppath}/%{name}-%{version}-root
ExcludeArch:	ppc64 s390x

### Description taken from http://wiki.octave.org/wiki.pl?OctaveForge
%description
octave-forge (http://octave.sf.net) is a community project for
collaborative development of octave extensions. If you have a large
package that you want to open up to collaborative development, or a
couple of m-files that you want to contribute to an existing package,
octave-forge is the place to do it.
 
%prep
%setup -q

%build
LC_ALL=POSIX
export LC_ALL
export CXXFLAGS="%optflags -fno-use-cxa-atexit"
HOST_TYPE=`echo "disp(octave_config_info('canonical_host_type'))" | octave -qf`
OCT_DIR="octave/"`echo "disp(OCTAVE_VERSION)" | octave -qf`
OF_ALT="octave-forge-alternatives"
%configure --prefix=$RPM_BUILD_ROOT/%{_prefix} \
	--exec-prefix=$RPM_BUILD_ROOT/%{_prefix} \
	--with-mpath=$RPM_BUILD_ROOT/%{_prefix}/share/$OCT_DIR/site/m/octave-forge \
	--with-opath=$RPM_BUILD_ROOT/%{_prefix}/libexec/$OCT_DIR/site/oct/$HOST_TYPE/octave-forge \
	--with-xpath=$RPM_BUILD_ROOT/%{_prefix}/libexec/$OCT_DIR/site/exec/$HOST_TYPE \
	--with-altpath=$RPM_BUILD_ROOT/%{_prefix}/share/$OCT_DIR/site/$OF_ALT/m \
	--with-altmpath=$RPM_BUILD_ROOT/%{_prefix}/share/$OCT_DIR/site/$OF_ALT/m/octave-forge \
	--with-altopath=$RPM_BUILD_ROOT/%{_prefix}/libexec/$OCT_DIR/site/$OF_ALT/oct/$HOST_TYPE \
	--with-x

make

%install
rm -rf $RPM_BUILD_ROOT
%makeinstall

%clean
rm -rf $RPM_BUILD_ROOT

%post

%preun

%postun

%files
%defattr(-,root,root)
%doc COPYING* README RELEASE-NOTES TODO
%doc doc/*.html doc/coda/*.sgml doc/coda/appendices/*.sgml
%doc doc/coda/oct/*.sgml doc/coda/standalone/*.sgml
%{_prefix}/bin/mex
%{_prefix}/share/octave/*
%{_prefix}/libexec/octave/*
%{_mandir}/man1/mex*

%changelog
* Tue Jun 15 2004 Quentin Spencer <qspencer [AT] ieee [dot] org>
- Added qhull support.

* Tue Feb 24 2004 Quentin Spencer <qspencer [AT] ieee [dot] org>
- Added GiNaC as a dependency. Fixed install directories for
  octave-forge alternatives.

* Fri Jun 13 2003 Quentin Spencer <qspencer [AT] ieee [dot] org>
- Added new package description, revised so that configure
  automatically generates the correct octave version and
  octave-forge version, added dependencies.

* Wed May 14 2003 Quentin Spencer <qspencer [AT] ieee [dot] org> 2.1.48-2
- Commented out code for ls-R files because of recent changes in
  Octave's use of kpathsea. Didn't delete it yet because it may
  yet be needed in the future.

* Tue Feb  4 2003 Quentin Spencer <qspencer [AT] ieee [dot] org> 2.1.44-1
- First Version, loosely based on Red Hat's spec file for octave.
